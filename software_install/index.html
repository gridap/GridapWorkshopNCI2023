<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <script src="/GridapWorkshopNCI2023/libs/lunr/lunr.min.js"></script> <script src="/GridapWorkshopNCI2023/libs/lunr/lunr_index.js"></script> <script src="/GridapWorkshopNCI2023/libs/lunr/lunrclient.min.js"></script> <link rel=stylesheet  href="/GridapWorkshopNCI2023/libs/highlight/github.min.css"> <link rel=stylesheet  href="/GridapWorkshopNCI2023/css/franklin.css"> <link rel=stylesheet  href="/GridapWorkshopNCI2023/css/poole_hyde.css"> <link rel=stylesheet  href="/GridapWorkshopNCI2023/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=apple-touch-icon  sizes=152x152  href="/GridapWorkshopNCI2023/assets/favicon/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="/GridapWorkshopNCI2023/assets/favicon/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="/GridapWorkshopNCI2023/assets/favicon/favicon-16x16.png"> <link rel=manifest  href="/GridapWorkshopNCI2023/assets/favicon/site.webmanifest"> <link rel=mask-icon  href="/GridapWorkshopNCI2023/assets/favicon/safari-pinned-tab.svg" color="#5bbad5"> <meta name=msapplication-TileColor  content="#da532c"> <meta name=theme-color  content="#ffffff"> <title>Software install instructions and material</title> <style> .content {max-width: 60rem} </style> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <img src="/GridapWorkshopNCI2023/assets/logos.png" style="width: 500px; height: auto; display: inline"> <div style="font-weight: margin-bottom: 0.5em"><a href="/GridapWorkshopNCI2023/">28-29th, November, 2023</a> <span style="opacity: 0.9;">| Australian National University, Canberra</span></div> <br> <h1><a href="/GridapWorkshopNCI2023/">Introduction to Gridap: Simulating PDEs using finite elements in Julia</a></h1> <div style="line-height:18px; font-size: 15px; opacity: 0.85">by &nbsp; <a href="https://research.monash.edu/en/persons/santiago-badia">Santiago Badia</a>, &nbsp; <a href="https://amartinhuertas.github.io/">Alberto F. Martin</a>, &nbsp; <a href="https://github.com/JordiManyer">Jordi Manyer</a> </div> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9; margin-bottom: 1.2cm;"> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/"><b>Welcome</b></a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/venue/"><b>Venue</b></a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/schedule"><b>Schedule</b></a> <a class="sidebar-nav-item active" href="/GridapWorkshopNCI2023/software_install/">Software install instructions</a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/tutorials/">Tutorials & Exercises</a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/references/">References</a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/grants/">Registration and grants for research students</a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/acks/">Acknowledgements</a> <a class="sidebar-nav-item " href="/GridapWorkshopNCI2023/flyer/">Event Flyer</a> <br> </nav> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/GridapWorkshopNCI2023/search/index.html"> </form> <br> <br> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id=gridapworkshop2023material ><a href="#gridapworkshop2023material" class=header-anchor >GridapWorkshop2023Material</a></h1> <p><em>Latest update: 23/11/2023</em></p> <p>The practical part of the workshop will consist of instructors&#39; guided hands-on tutorials and exercises. This will be carried out either on the attendees laptops &#40;mostly first day&#41; or the <a href="https://opus.nci.org.au/display/Help/Gadi&#43;User&#43;Guide">Gadi supercomputer</a> at NCI &#40;mostly second day&#41;. You will find below the instructions to set up the software environment required in both cases. For the Gadi supercomputer, you will get an invitation from the instructors to create an account prior to the workshop.</p> <p><strong>NOTE</strong>: In the case you have any issues while following these instructions, please fill an issue <a href="https://github.com/gridap/GridapWorkshop2023Material/issues">here</a> and we will try to help you out. This will also help other participants that may have the same issue.</p> <h2 id=required_software ><a href="#required_software" class=header-anchor >Required software</a></h2> <p>Before being able to work on the workshop material, you will need to install the following software on your laptop:</p> <ul> <li><p>Install <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a>, the version control system we will use. <strong>For Windows users, we strongly recommend installing <a href="https://gitforwindows.org/">git for Windows</a>. This will also install a bash shell, which will allow you to follow the rest of the installation instructions verbatim.</strong></p> <li><p>Download and install Julia based on the platform you are using from the <a href="https://julialang.org/downloads/platform/">Julia</a> home page.</p> <li><p>Download and install VSCode based on the platform you are using from the <a href="https://code.visualstudio.com/download">VSCode</a> home page. </p> <li><p><a href="https://www.julia-vscode.org/docs/dev/gettingstarted/#Installing-the-Julia-extension">Install</a> and <a href="https://www.julia-vscode.org/docs/dev/gettingstarted/#Configuring-the-Julia-extension">configure</a> the <a href="https://code.visualstudio.com/docs/languages/julia">Julia extension for VSCode</a>. Some interesting features of the Julia extension for VSCode are covered in the following <a href="https://www.youtube.com/watch?v&#61;IdhnP00Y1Ks&amp;t&#61;125s">YouTube</a> video.</p> <li><p>Install <a href="https://www.paraview.org/download/">ParaView</a> post-processing software. We will use the basic features of ParaView. In any case, if you are keen on learning more, there is a whole <a href="https://www.youtube.com/playlist?list&#61;PLvkU6i2iQ2fpcVsqaKXJT5Wjb9_ttRLK-">YouTube channel</a> on ParaView that will give you many more ideas. </p> <li><p>Finally, you will need an <strong>ssh</strong> client to connect to Gadi. Generally, every modern OS should have one installed by default. To check if you have one, open a terminal and type <code>ssh</code>. If a message like <code>usage: ssh ...</code> appears, you are good to go.</p> </ul> <h2 id=getting_the_workshop_material ><a href="#getting_the_workshop_material" class=header-anchor >Getting the workshop material</a></h2> <p>The workshop material is available as a git repository <a href="https://github.com/gridap/GridapWorkshop2023Material">here</a>. You can either download it as a zip file or clone the repository using git. We strongly recommend the latter as you will be able to automatically pull the most up-to-date changes as per required.</p> <p>If your system has an ssh client, you can clone the repository using the following command</p> <pre><code class="bash hljs">git <span class=hljs-built_in >clone</span> git@github.com:gridap/GridapWorkshop2023Material.git</code></pre>
<p>from the terminal. In order this command to be successful, you will need to generate a pair of public/private SSH keys, and then associate the public key to your GitHub account. You may find some instructions on how to do this <a href="https://github.com/MonashMath/SCI1022/blob/master/Git.md#182-connecting-to-github-with-ssh-keys">here</a>. If, for whatever reason, you are not able to succeed, you may also try:</p>
<pre><code class="bash hljs">git <span class=hljs-built_in >clone</span> https://github.com/gridap/GridapWorkshop2023Material.git</code></pre>
<p>which does not require the aforementioned pair of public/private SSH keys.</p>
<p>Alternative methods to clone the repository can be found <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository">here</a>.</p>
<p>Once you have cloned the repository, you can pull the most up-to-date changes with the following command executed from the root directory of the repository:</p>
<pre><code class="bash hljs">git pull origin</code></pre>
<p>You may expect changes in the tutorials and exercises till the very last minute. These instructions are mostly definitive, though.</p>
<h2 id=setting_up_the_environment_on_your_local_computer_from_the_terminal ><a href="#setting_up_the_environment_on_your_local_computer_from_the_terminal" class=header-anchor >Setting up the environment on your local computer from the terminal</a></h2>
<p>Move into the newly cloned repository and start Julia from the terminal by typing</p>
<pre><code class="bash hljs">julia --project=.</code></pre>
<p>Then, press <code>&#93;</code> to enter the package manager and run</p>
<pre><code class="julia hljs">(GridapWorkshop) pkg&gt; instantiate</code></pre>
<p>to install and precompile all the packages needed for the workshop. This may take a while.</p>
<p>More information on Julia Environments can be found <a href="https://pkgdocs.julialang.org/v1/environments/">here</a>.</p>
<h2 id=setting_up_the_environment_on_your_local_computer_with_vscode ><a href="#setting_up_the_environment_on_your_local_computer_with_vscode" class=header-anchor >Setting up the environment on your local computer with VSCode</a></h2>
<ol>
<li><p>Open VSCode. Then, on the top menu, select <code>File-&gt;Open Folder</code>, and select the workshop&#39;s material folder you just cloned.</p>

<li><p>Ensure that the Julia environment in the bottom status bar of VSCode is <code>GridapWorkshop</code>. Click <a href="https://www.julia-vscode.org/docs/dev/userguide/env/#Julia-Environments">here</a> for instructions on how to do that.</p>

<li><p>Open the Julia REPL in VSCode. To this end, open the command palette with the keyboard key combination <code>Crtl&#43;Shift&#43;P</code>.</p>

<li><p>On the command palette, type <code>&quot;julia&quot;</code>. You should get a drop-down list with different options. Select <code>Julia: Start REPL</code> option. This should open the Julia REPL on the VSCode&#39;s terminal window at the bottom.</p>

<li><p>Run the <code>instantiate</code> package manager command as described in the previous section. </p>

</ol>
<h2 id=setting_up_the_environment_on_gadi ><a href="#setting_up_the_environment_on_gadi" class=header-anchor >Setting up the environment on Gadi</a></h2>
<p>First, we will need to log into Gadi. You will receive an email at some point with an invitation to create an account. At the end of the process, you will get a username and password &#40;which you should change&#41;. If your username is <code>aaa777</code>, you can connect to Gadi by typing</p>
<pre><code class="bash hljs">ssh -X aaa777@gadi.nci.org.au</code></pre>
<p>When prompted, enter your password. You should now be logged into Gadi and located in your home directory. We would also recommend setting up passwordless ssh access to Gadi &#40;but it is not required&#41;.</p>
<p>In addition to your home directory, you have access to a scratch space, a project-wide shared filesystem that is optimized for parallel access. This is where we will be working during the workshop. Start by creating a personal folder within the project&#39;s scratch space and linking it back to your home directory:</p>
<pre><code class="bash hljs"><span class=hljs-built_in >mkdir</span> /scratch/vp91/<span class=hljs-variable >$USER</span>
<span class=hljs-built_in >ln</span> -s /scratch/vp91/<span class=hljs-variable >$USER</span> <span class=hljs-variable >$HOME</span>/scratch</code></pre>
<p>Move into your newly created scratch directory and clone the workshop repository as described above. Once the workshop repository is cloned, move into the <code>/gadi</code> subdirectory. This directory contains the distributed codes we will be using. Load the Gadi environment by running</p>
<pre><code class="bash hljs"><span class=hljs-built_in >source</span> modules.sh</code></pre>
<p>The script <code>modules.sh</code> has several purposes, and needs to be sourced every time you log in. It loads the Julia module, the Intel-MPI modules, and sets up some environment variables we will need.</p>
<p>Next, repeat the steps described in the previous section to setup the Julia environment in serial. In addition, you will need to setup the environment for parallel. To do so, run the following commands on the terminal:</p>
<pre><code class="bash hljs">julia --project=. -e <span class=hljs-string >&#x27;using MPIPreferences; MPIPreferences.use_system_binary()&#x27;</span>
julia --project=. -e <span class=hljs-string >&#x27;using Pkg; Pkg.build()&#x27;</span></code></pre>
<p>The first line sets up <code>MPI.jl</code> to work with the Intel-MPI binaries installed on Gadi instead of the Julia-specific artifacts. The second line does the same for <code>GridapPETSc.jl</code> and <code>GridapP4est.jl</code>, which are the Gridap wrappers for PETSc and P4est, respectively.</p>
<h2 id=accessing_to_gadi_using_are_graphical_interface_on_the_web_browser ><a href="#accessing_to_gadi_using_are_graphical_interface_on_the_web_browser" class=header-anchor >Accessing to Gadi using ARE &#40;graphical interface on the web browser&#41;</a></h2>
<p>For those users which are more comfortable with graphical interfaces, the instructions in the previous section can also be followed on a terminal opened in your web browser using the so-called <a href="https://opus.nci.org.au/display/Help/ARE&#43;User&#43;Guide">ARE-Australian Research Environment</a>. ARE will also allow you to open a Virtual Desktop on the web browser, and run ParaView on Gadi, so that you can visualize the results of your simulations without having to download the data files to your local computer &#40;which might be heavy for large scale problems&#41;. You can find ARE usage instructions <a href="https://opus.nci.org.au/display/Help/ARE&#43;User&#43;Guide">here</a>.</p>
<h2 id=creating_a_system_image ><a href="#creating_a_system_image" class=header-anchor >Creating a system image</a></h2>
<p>Unfortunately, there is no parallel distributed version of the Julia REPL. This means running MPI codes interactively is not possible. Moreover, Julia notoriously suffers from long TTFX &#40;Time To First eXecution&#41; times due to Just-In-Time &#40;JIT&#41; compilation. Although this issue is being the focus of the latest releases, it can still be tedious to work within an edit-run-debug cycle.</p>
<p>To alleviate this problem, we will create a system image that contains all the packages we will need during the workshop. This will allow us to start Julia with the system image preloaded, and thus avoid the long TTFX times.</p>
<p>The <code>/gadi/compilation</code> directory contains files that allow us to do just that using <a href="https://julialang.github.io/PackageCompiler.jl/stable/"><code>PackageCompiler.jl</code></a>. Although we will be creating a sysimage &#40;to be used with Julia&#41;, this package also has options to create dynamic libraries &#40;to be used with C/C&#43;&#43;/Fortran&#41; and executables.</p>
<p>First, we will need to install <code>PackageCompiler</code> package. It does not need to be installed within the project, so just run</p>
<pre><code class="bash hljs">julia -e <span class=hljs-string >&#x27;using Pkg; Pkg.add(&quot;PackageCompiler&quot;)&#x27;</span></code></pre>
<p>Next, run the following commands from the <code>/gadi</code> directory to create the system image</p>
<pre><code class="bash hljs">julia --project=. compilation/compile.jl</code></pre>
<p>This will take a while &#40;around 5/6 mins&#41;, and will create a system image <code>GadiTutorial.so</code> in the <code>/gadi</code> directory. You can then test this sysimage by running</p>
<pre><code class="bash hljs">julia --project=. -JGadiTutorial.so compilation/warmup.jl</code></pre>
<p>Alternatively, we have also provided a BATCH script that creates the system image on a compute node. This is useful if the architecture of the compute nodes is different from the login nodes &#40;for instance, when running on GPU nodes&#41;. It is also good practice to not run heavy computations on the login nodes. To run compile remotely, run</p>
<pre><code class="bash hljs">qsub compilation/compile.sh</code></pre>
<p>You can see the status of the job by running <code>qstat</code>.</p>
<div class=page-foot >
  <div class=copyright >
    <a href="https://github.com/gridap/GridapWorkshopNCI2023"><b>Edit this page on <img class=github-logo  src="https://unpkg.com/ionicons@5.1.2/dist/svg/logo-github.svg"></b></a><br>
    Last modified: November 26, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div>